/**
 * –ú–û–î–£–õ–¨: –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø (event-handlers.js)
 * 
 * –ó–ê–ß–ï–ú –ù–£–ñ–ï–ù: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–µ—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
 * 
 * –ê–†–•–ò–¢–ï–ö–¢–£–†–ê: 
 * - initApp: –≥–ª–∞–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
 * - initGlobalEventHandlers: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–ª–∏–∫–æ–≤
 * 
 * –ü–†–ò–ù–¶–ò–ü: –§–∞—Å–∞–¥ - —Å–∫—Ä—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞ –ø—Ä–æ—Å—Ç—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
 */

import { addBtn, addApiTasksButton } from './dom-elements.js'
import { loadTaskFromAPI } from './api.js'
import { handleNewTask, initializeTasks } from './task-controller.js'
import { initRouter } from './router.js'

/**
 * –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
 * 
 * –ß–¢–û –ù–ê–°–¢–†–ê–ò–í–ê–ï–¢:
 * - –ö–Ω–æ–ø–∫–∞ "Add" ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
 * - –ö–Ω–æ–ø–∫–∞ "Load from API" ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á —Å —Å–µ—Ä–≤–µ—Ä–∞
 * 
 * –û–°–û–ë–ï–ù–ù–û–°–¢–ò:
 * - –¢–æ–ª—å–∫–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–ª–∏–∫–∏ (–Ω–µ –∫–∞—Å–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á)
 * - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
 */
export const initGlobalEventHandlers = () => {
    addBtn.addEventListener('click', handleNewTask)
    addApiTasksButton.addEventListener('click', loadTaskFromAPI)
}

/**
 * –ì–õ–ê–í–ù–´–ô –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
 * 
 * –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò:
 * 1. initializeTasks()    - –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á –∏–∑ localStorage
 * 2. initGlobalEventHandlers() - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–æ–∫
 * 3. initRouter()         - –∑–∞–ø—É—Å–∫ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
 * 
 * –ü–û–ß–ï–ú–£ –¢–ê–ö–û–ô –ü–û–†–Ø–î–û–ö:
 * - –°–Ω–∞—á–∞–ª–∞ –¥–∞–Ω–Ω—ã–µ (–∑–∞–¥–∞—á–∏ –º–æ–≥—É—Ç –≤–ª–∏—è—Ç—å –Ω–∞ DOM)
 * - –ü–æ—Ç–æ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (–∂–¥—É—Ç –≥–æ—Ç–æ–≤–æ–≥–æ DOM)
 * - –í –∫–æ–Ω—Ü–µ —Ä–æ—É—Ç–µ—Ä (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≥–æ—Ç–æ–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º)
 * 
 * –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨: –¢–æ–ª—å–∫–æ –≤ main.js –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
 */
export const initApp = () => {
    initializeTasks()          // üì¶ –î–∞–Ω–Ω—ã–µ
    initGlobalEventHandlers()  // üñ±Ô∏è –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è  
    initRouter()               // üß≠ –ù–∞–≤–∏–≥–∞—Ü–∏—è
}

// üí° –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ô –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ô:
// –†–∞–Ω—å—à–µ main.js –∑–Ω–∞–ª —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–æ–¥—É–ª—è—Ö.
// –¢–µ–ø–µ—Ä—å –æ–Ω –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ initApp() - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è.
// –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—Å—è –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å, main.js –Ω–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å.