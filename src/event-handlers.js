/**
 * –ú–û–î–£–õ–¨: –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô –ò –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
 * –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
 * –ü–∞—Ç—Ç–µ—Ä–Ω: Application Bootstrap / Composition Root
 */

import { addBtn, addApiTasksButton } from './dom-elements.js'
import { addTask } from './task-manager.js'
import { loadTasksFromLocalStorage } from './storage.js'
import { loadTaskFromAPI } from './api.js'

// üéØ –ü–ê–¢–¢–ï–†–ù: Dependency Composition
// –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ - –ª–µ–≥–∫–æ –≤–∏–¥–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
export const initEventHandlers = () => {
    addBtn.addEventListener('click', addTask)
    addApiTasksButton.addEventListener('click', loadTaskFromAPI)
    // üí° –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ô: –ß–∏—Å—Ç–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è - –Ω–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
    // –ü—Ä–æ—Å—Ç–æ —Å–≤—è–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
export const initApp = () => {
    loadTasksFromLocalStorage()
    // üéØ –ü–ê–¢–¢–ï–†–ù: Separated Initialization
    // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–±—ã—Ç–∏–π
    // –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ —á–∞—Å—Ç—è–º
}

// üîß –ê–†–•–ò–¢–ï–ö–¢–£–†–ê: –≠—Ç–æ—Ç –º–æ–¥—É–ª—å - "–∫–ª–µ–π" –º–µ–∂–¥—É –≤—Å–µ–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
// –ó–Ω–∞–µ—Ç –æ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–µ, –Ω–æ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

// üö® –î–´–†–ê: –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
// –ß—Ç–æ –µ—Å–ª–∏ DOM —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã?
// –ß—Ç–æ –µ—Å–ª–∏ LocalStorage –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω?

// üí° –í–û–ó–ú–û–ñ–ù–û–ï –£–õ–£–ß–®–ï–ù–ò–ï:
// –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
// if (addBtn) addBtn.addEventListener(...)
// else console.warn('Add button not found')