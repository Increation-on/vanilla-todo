/**
 * –ú–û–î–£–õ–¨: –ü–†–ò–í–Ø–ó–ö–ê –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í –°–û–ë–´–¢–ò–ô –ó–ê–î–ê–ß (task-event-binder.js)
 * 
 * –ó–ê–ß–ï–ú –ù–£–ñ–ï–ù: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –∑–∞–¥–∞—á
 * 
 * –ê–†–•–ò–¢–ï–ö–¢–£–†–ê: Event Binding Layer
 * - –°–≤—è–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π
 * - –ò–∑–æ–ª–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è DOM
 * - –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
 * 
 * –ü–†–ò–ù–¶–ò–ü: –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –≤—Å–µ—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —Å –∑–∞–¥–∞—á–µ–π
 */

import { removeTaskFromStorage, toggleTaskStatus } from './storage.js'
import { deleteElement, toggleClass } from './dom-manipulation.js'
import { initInlineEditor } from './inline-editor/inline-editor.js'

/**
 * –ü–†–ò–í–Ø–ó–´–í–ê–ï–¢ –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô –ö –≠–õ–ï–ú–ï–ù–¢–ê–ú –ó–ê–î–ê–ß–ò
 * 
 * –î–í–ê –û–°–ù–û–í–ù–´–• –°–û–ë–´–¢–ò–Ø:
 * - –£–î–ê–õ–ï–ù–ò–ï: –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫–µ Delete
 * - –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –°–¢–ê–¢–£–°–ê: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–∞
 * 
 * –°–í–Ø–ó–¨ –î–ê–ù–ù–´–• –ò –ò–ù–¢–ï–†–§–ï–ô–°–ê:
 * - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–∞–Ω–Ω—ã—Ö ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
 * - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å –¥–∞–Ω–Ω—ã–º–∏
 */
export const bindTaskEventHandlers = (taskContainer, taskText, checkbox, deleteButton, editButton, taskId) => {
    /**
     * –û–ë–†–ê–ë–û–¢–ß–ò–ö –£–î–ê–õ–ï–ù–ò–Ø –ó–ê–î–ê–ß–ò
     * 
     * –î–í–û–ô–ù–û–ï –î–ï–ô–°–¢–í–ò–ï:
     * 1. –£–¥–∞–ª—è–µ–º –∑–∞–¥–∞—á—É –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–¥–∞–Ω–Ω—ã–µ)
     * 2. –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –∏–∑ DOM (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
     * 
     * –ü–û–ß–ï–ú–£ –û–î–ù–û–í–†–ï–ú–ï–ù–ù–û: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –æ—Ç—Ä–∞–∂–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
     */
    deleteButton.addEventListener('click', () => {
        removeTaskFromStorage(taskId)    // üóëÔ∏è –£–¥–∞–ª—è–µ–º –∏–∑ –¥–∞–Ω–Ω—ã—Ö
        deleteElement(taskContainer)     // üé® –£–¥–∞–ª—è–µ–º –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    })

    /**
     * –û–ë–†–ê–ë–û–¢–ß–ò–ö –ò–ó–ú–ï–ù–ï–ù–ò–Ø –°–¢–ê–¢–£–°–ê –í–´–ü–û–õ–ù–ï–ù–ò–Ø
     * 
     * –î–í–û–ô–ù–ê–Ø –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø:
     * 1. –ò–∑–º–µ–Ω—è–µ–º —Å—Ç–∞—Ç—É—Å –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–¥–∞–Ω–Ω—ã–µ)
     * 2. –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (CSS-–∫–ª–∞—Å—Å)
     * 
     * –ü–û–ß–ï–ú–£ –û–î–ù–û–í–†–ï–ú–ï–ù–ù–û: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–æ–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
     */
    checkbox.addEventListener('change', () => {
        toggleTaskStatus(taskId)         // üì¶ –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
        toggleClass(taskText, 'completed') // üé® –û–±–Ω–æ–≤–ª—è–µ–º –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥
    })

    initInlineEditor(editButton, taskId, taskText.textContent, (taskId, newText) => {
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –≤ DOM
        taskText.textContent = newText
    })
}

// üí° –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ô –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ô:
// –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –±—ã–ª —Å–æ–∑–¥–∞–Ω —á—Ç–æ–±—ã —Ä–∞–∑–æ—Ä–≤–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
// –º–µ–∂–¥—É router.js –∏ task-controller.js. –¢–µ–ø–µ—Ä—å –æ–Ω —Å–ª—É–∂–∏—Ç —á–∏—Å—Ç–æ–π
// –ø—Ä–æ—Å–ª–æ–π–∫–æ–π –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ —Å–æ–±—ã—Ç–∏–π.

// üîÆ –í–û–ó–ú–û–ñ–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø:
// - –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–ª–≥–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è (long press)
// - Drag & drop –¥–ª—è –ø–µ—Ä–µordering –∑–∞–¥–∞—á
// - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ shortcuts –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤